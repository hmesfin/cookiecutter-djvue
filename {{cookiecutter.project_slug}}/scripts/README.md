# Dark Mode Application Scripts

This directory contains scripts to help automatically apply dark mode support to your Vue.js components.

## Available Scripts

### 1. Python Script (`apply_dark_mode.py`)

The Python script is the recommended tool as it works well with the cookiecutter template structure.

#### Installation

No additional dependencies needed - uses Python standard library.

#### Usage

```bash
# Basic usage - apply dark mode to all components
python scripts/apply_dark_mode.py

# Dry run - see what would be changed without modifying files
python scripts/apply_dark_mode.py --dry-run

# Analyze files to see dark mode readiness
python scripts/apply_dark_mode.py --analyze

# Interactive mode - confirm each file
python scripts/apply_dark_mode.py --interactive

# Create backups before modifying
python scripts/apply_dark_mode.py --backup

# Verbose output
python scripts/apply_dark_mode.py --verbose

# Process specific directory
python scripts/apply_dark_mode.py --dir src/modules/dashboard

# Combine options
python scripts/apply_dark_mode.py --dry-run --verbose --dir src/components
```

### 2. Node.js Script (`apply-dark-mode.js`)

Alternative implementation in JavaScript. Requires `glob` package.

#### Installation

```bash
npm install --save-dev glob
# or
yarn add -D glob
```

#### Usage

```bash
# Basic usage
node scripts/apply-dark-mode.js

# Dry run
node scripts/apply-dark-mode.js --dry-run

# Analyze mode
node scripts/apply-dark-mode.js --analyze

# With options
node scripts/apply-dark-mode.js --dir src/modules --verbose --backup
```

## How It Works

The scripts automatically:

1. **Scan** Vue files for Tailwind CSS classes
2. **Identify** classes that need dark mode variants
3. **Add** appropriate `dark:` prefixed classes
4. **Preserve** existing dark mode classes
5. **Report** changes made

### Supported Transformations

#### Background Colors
- `bg-white` → `dark:bg-gray-900`
- `bg-gray-50` → `dark:bg-gray-900`
- `bg-gray-100` → `dark:bg-gray-800`
- And more...

#### Text Colors
- `text-gray-900` → `dark:text-gray-100`
- `text-gray-700` → `dark:text-gray-300`
- `text-black` → `dark:text-white`
- And more...

#### Borders
- `border-gray-200` → `dark:border-gray-700`
- `border-gray-300` → `dark:border-gray-600`

#### Hover States
- `hover:bg-gray-50` → `dark:hover:bg-gray-800`
- `hover:text-gray-900` → `dark:hover:text-gray-100`

#### Shadows
- `shadow-sm` → `dark:shadow-lg dark:shadow-gray-900/30`
- `shadow-lg` → `dark:shadow-2xl dark:shadow-gray-900/50`

## Workflow Recommendations

### Initial Setup

1. **Analyze** your codebase first:
   ```bash
   python scripts/apply_dark_mode.py --analyze
   ```

2. **Dry run** to see what changes would be made:
   ```bash
   python scripts/apply_dark_mode.py --dry-run --verbose
   ```

3. **Apply** changes with backup:
   ```bash
   python scripts/apply_dark_mode.py --backup
   ```

4. **Test** your application in both light and dark modes

5. **Fine-tune** manually for any special cases

### For New Components

After creating new components, run the script on specific directories:

```bash
python scripts/apply_dark_mode.py --dir src/components/NewComponent
```

### Integration with Development

Add to your `package.json` scripts:

```json
{
  "scripts": {
    "dark:analyze": "python scripts/apply_dark_mode.py --analyze",
    "dark:apply": "python scripts/apply_dark_mode.py",
    "dark:dry-run": "python scripts/apply_dark_mode.py --dry-run --verbose"
  }
}
```

Then use:
```bash
npm run dark:analyze
npm run dark:apply
```

## Manual Adjustments

After running the script, you may need to manually adjust:

1. **Dynamic Classes** - Classes generated by JavaScript
2. **Custom Colors** - Brand colors that need specific dark variants
3. **Images** - May need different images or filters for dark mode
4. **Charts/Graphs** - Update color schemes for data visualizations
5. **Third-party Components** - Check their dark mode documentation

## Best Practices

1. **Always review changes** - Use dry-run first
2. **Test thoroughly** - Check both modes after changes
3. **Use version control** - Commit before running
4. **Keep backups** - Use the --backup flag
5. **Be consistent** - Apply to entire modules at once

## Troubleshooting

### Script doesn't find files
- Check the directory path
- Ensure you're running from the project root
- Verify .vue extension on files

### Classes not being added
- Check if dark classes already exist
- Verify class names match Tailwind conventions
- Use --verbose to see detailed processing

### Unwanted changes
- Use --interactive mode for file-by-file control
- Restore from backups (.backup files)
- Use git to revert changes

## Handling Dynamic Classes (:class bindings)

The main script only processes static `class` attributes to avoid breaking Vue template syntax. For dynamic `:class` bindings, you have two options:

### Option 1: Use the Helper Script

```bash
# For simple class strings
python scripts/dark_mode_helper.py "text-gray-900 hover:text-gray-700"

# Output:
# Original: text-gray-900 hover:text-gray-700
# With dark: text-gray-900 dark:text-gray-100 hover:text-gray-700 dark:hover:text-gray-300
```

### Option 2: Manual Updates

For `:class` bindings, add dark variants manually:

**Before:**
```vue
:class="[
  isActive 
    ? 'text-gray-900' 
    : 'text-gray-500'
]"
```

**After:**
```vue
:class="[
  isActive 
    ? 'text-gray-900 dark:text-gray-100' 
    : 'text-gray-500 dark:text-gray-400'
]"
```

## Customization

To add custom mappings, edit the mapping dictionaries in the script:

```python
COLOR_MAPPINGS = {
    'bg-custom-light': 'dark:bg-custom-dark',
    # Add your custom mappings here
}
```

## Safety Features

- **Dry run mode** - Preview changes without modifying files
- **Backup creation** - Original files saved with .backup extension
- **Interactive mode** - Confirm each file modification
- **Skip existing** - Won't duplicate dark classes already present
- **Error handling** - Continues processing even if individual files fail

## Performance

The scripts are optimized to:
- Process files in a single pass
- Use efficient regex patterns
- Skip files without template sections
- Ignore node_modules and backup files

## License

These scripts are part of the cookiecutter-djvue template and follow the same license.